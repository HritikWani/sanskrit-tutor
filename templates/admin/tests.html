{% extends "base.html" %}

{% block title %}Assigned Tests{% endblock %}

{% block content %}
  <div class="container">
    <h2>Available Tests (Assigned by Tutor)</h2>

    <table border="1">
      <thead>
        <tr>
          <th>Subject</th>
          <th>Class</th>
          <th>School</th>
          <th>Date</th>
          <th>Description</th>
          <th>Question Paper</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>
        {% for t in tests %}
        <tr>
          <td>{{ t.subject or 'N/A' }}</td>
          <td>{{ t.class }}</td>
          <td>{{ t.school or 'N/A' }}</td>
          <td>{{ t.test_date }}</td>
          <td>{{ t.description or '—' }}</td>
          <td>
            {% if t.question_paper %}
              <a href="{{ url_for('static', filename='uploads/' ~ t.question_paper) }}" target="_blank">View</a>
            {% else %}
              Not Uploaded
            {% endif %}
          </td>
          <td>
            <a href="/admin/delete-test/{{ t._id }}" onclick="return confirm('Are you sure you want to delete this test?')">Delete</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <br>
    <a href="javascript:history.back()"><button>⬅ Back</button></a>
  </div>
{% endblock %}
